Node.js는 한 마디로 정의하자면 비동기 이벤트 주도 JavaScript 런타임입니다. 천천히 각 특징에 대해서 알아봅시다. 

# 1. JavaScript 런타임
그냥 JavaScript라는 프로그래밍 언어를 실행시킬 수 있는 환경이라고 생각하면 됩니다. 원래 JavaScript는 크롬같은 브라우저에서만 사용이 가능했으나, Node.js를 설치하면 이걸 C언어 파이썬처럼 그냥 로컬에서도 쓸 수 있다는 것입니다. 
# 2. 논블로킹 I/O
Node.js에서는 I/O 메서드에 대해서 논블로킹인 비동기 방식을 제공하고 콜백 함수를 받습니다. 
- I/O: 파일 시스템 접근이나 네트워크를 통한 요청 등을 의미합니다. 
- 블로킹: 이전 작업이 끝나야만 다음 작업을 수행하는 것을 의미합니다. 
- 논 블로킹: 이전 작업이 완료될 때까지 대기하지 않고 바로 다음 작업을 수행하는 것을 의미합니다. 
# 3. 이벤트 기반
- [Node.js 이벤트 루프](https://www.korecmblog.com/node-js-event-loop/)
이벤트 기반이란 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미합니다. Node.js에는 내부적으로 이벤트 루프가 존재해서 언제나 작업들을 시스템 커널로 넘깁니다. 
그러면 이벤트 루프가 어떤식으로 동작되는지 알아봅시다. 

이벤트 루프의 작업 순서
![이벤트 루프 순서][https://dzone.com/storage/temp/14746949-eventloop1.png]

**timers**
timers 페이즈에서는 `setTimeout()`과 `setInterval()`로 스케줄링된 콜백을 실행합니다. 타이머는 일정 시간 후에 실행되어야 하는 기준시간을 지정합니다. 따라서 타이머에 지정된 시간은 보장되지 않습니다. 
**pending callbacks**
이전 이벤트 루프 반복에서 수행되지 못했던 I/O 콜백들을 실행합니다. 대부분의 페이즈는 시스템의 실행 한도 영향을 받습니다. 이 제한에 의해 큐에 쌓인 모든 작업을 수행하지 않고 다음 페이즈로 넘어갈 수도 있습니다. 이 때 처리하지 못한 작업들이 이 pending callback 페이즈에서 수행됩니다. 
예를 들어 TCP 소켓이 연결을 시도하다가 `ECONNREFUSED` 에러를 받으면 일부 시스템에서는 오류를 보고하기 위해서 기다리다가, pending callbacks 단계에 추가됩니다. 
**Idle, prepare**
이 페이즈들은 `Node.js`의 내부적인 관리를 위한 페이즈로 **자바스크립트**를 실행하지 않는다. 공식 문서에서도 별다른 설명이 없고 코드의 직접적인 실행에 영향을 미치지 않는다.
**poll** 
`setTimeout`, `setImmediate`, `close` 콜백 등을 제외한 거의 모든 콜백이 여기서 실행된다. 
-   데이터베이스에 쿼리를 보낸 후 결과가 왔을 때 실행되는 콜백
-   HTTP 요청을 보낸 후 응답이 왔을 때 실행되는 콜백
-   파일을 비동기로 읽고 다 읽었을 때 실행되는 콜백
**check**
이 페이즈는 오직 `setImmediate`의 콜백만을 위한 페이즈다. `setImmediate`가 호출되면 `Check Phase`의 큐에 담기고 `Node.js`가 `Check Phase`에 진입하면 차례대로 실행된다.
**close**
`socket.on('close', () => {});`과 같은 `close` 이벤트 타입의 핸들러를 처리하는 페이즈다.
# 4. 싱글 스레드
우선 프로세스와 스레드에 대해서 알아봅시다. 

**프로세스**는 운영체제에서 할당하는 작업의 단위입니다. 노드나 웹 브라우저 같은 프로그램은 개별적인 프로세스입니다. 프로세스 간에는 메모리 등의 리소스를 공유하지 않습니다.
**스레드**는 프로세스 내에서 실행되는 흐름의 단위입니다. 프로세스는 스레드를 여러 개 생성해 여러 작업을 동시에 처리할 수 있습니다. 스레드들은 부모 프로세스의 자원을 공유합니다. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있습니다. 

실제로는 Node.js에서 프로세스를 생성할 때 여러 개의 스레드들도 생성합니다. 하지만 우리가 직접 컨트롤할 수 있는 스레드가 하나밖에 없기 때문에 **싱글 스레드**라고 불립니다. 
멀티 스레드 방식은 개발하기 어렵기 때문에 Node.js에서는 싱글 스레드 방식을 채택했다고 이해하면 된다. 