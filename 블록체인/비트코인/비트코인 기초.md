### 서론
비트코인은 인터넷 기반 상거래에서 제 3자의 개입에 의해서 발생하는 많은 문제들을 회피하기 위해서 탄생하게 되었습니다. 
굳이 신뢰(예를 들어 은행)가 아니라 암호학적 증명을 사용해서 두 당사자가 신뢰받는 제 3자 없이 서로 직접 거래할 수 있게 해줍니다.

### 트랜잭션
비트코인에서는 전자화폐를 전자서명의 체인으로 정의합니다. 
각 owner들은 이전 트랜잭션의 해시와 다음 owner의 public key를 서명해서 코인의 끝 부분에 추가함으로써 코인을 전송할 수 있습니다. 따라서 받는 사람이 서명을 검증해서 소유권 체인을 확인할 수 있습니다. 
아래 그림은 Owner 0이 Owner 1의 Public Key와 이전 트랜잭션의 해시를 서명해서 트랜잭션을 전파하는 것으로 시작됩니다. 
![transaction](https://upload.wikimedia.org/wikipedia/commons/5/5e/Bitcoin_Transaction_Visual.png)

하지만 이러한 방법으로는 double-spend 문제를 해결할 수가 없습니다. 이중지불, 이미 사용된 화폐를 다른 곳에도 쓰는 것인데 전통적으로는 모든 트랜잭션을 확인하여 가장 앞선 트랜잭션만 받아들여서 해결합니다. 
신뢰받는 제 3자 없이 이 방식을 실현하려면, 거래를 모두 공개적으로 알려져야하고 참여자들에게는 단 하나의 거래 순서 기록에 합의하는 시스템이 필요합니다. 수취인은 각 거래의 시점에 해당 거래가 최초로 받은 거래임을 노드 다수가 동의했다는 증명을 필요로 합니다.

### 타임스탬프 서버
![timestamp](https://i.namu.wiki/i/9350mGR4bvRYmyIJmzaYb0PGPLJXk62NRc_3Qj-wG8K8QGo775GMr61Hy2HSoW1kbrJ_yasygjpuS61BX9stjs51MUrx13v3jJ2omjmcUULifr3vY0wJ6V6olNRV5Yjgu-qWQtdaCjvmTck8LMCHQg.webp)
우선 비트코인은 각 트랜잭션 정보들을 담은 블록을 만듭니다. 이러한 블록들에는 고유한 해시가 있는데 현재 블록 해시는 이전 블록의 해시값을 포함합니다. 해시는 어떠한 입력값을 넣으면 고유한 랜덤한 값이 나오는 함수라고 생각하면 됩니다. 밑에서 나오는 작업증명 시스템과 함께하면 긴 블록 체인은 정말 변조하기가 힘들어집니다.

### 작업증명(Proof-of-Work)
비트코인에서는 위의 타임스탬프 서버를 P2P 기반으로 구현하기 위해서 작업증명이라는 시스템을 채택하고 있습니다. 
- 작업증명이란 블록을 생성하기 위해서 여러 개의 0비트로 시작하는 해시값을 구하는 겁니다.
- nonce를 계속 1씩 증가시켜가며 원하는 해시값을 찾을 때 까지 작업을 계속합니다.
-> 그래서 이미 완료된 최신의 블록을 임의로 변경하려면 이전에 작업된 모든 블록들의 작업증명들도 재수행해야합니다. 그래서 비트코인이 변조하기 힘들다는 얘기가 나오는겁니다.
