Created at:  2025-05-23 01:51
Tag:
References:
Link Notes:
Course: 

# 1장 데이터베이스 암호화 설계
## 1.1 사용자 식별 및 비인가 사용자에 대한 통제
데이터베이스 사용자를 식별하고 정당한 사용자에게만 암호 키를 발급하는 것이 목적이며, 사용자 접근 유형은 정형적인 접근(Bulletin Job: 웹서버, 응용프로그램 등)과 비정형적인 접근(Non-Bulletin Job: DBA, 개발자 등)으로 나뉜다. 사용자별 접근정보(IP, 접속시간, 계정 등)를 기반으로 복호화가 수행되도록 설계한다. 비인가 사용자는 암호화된 데이터만 보이도록 설정하며 NULL 처리도 고려할 수 있다
## 1.2 암호화 대상 선정
암호화 대상은 특정 컬럼 또는 DB 전체가 될 수 있다. 컬럼 암호화는 민감 컬럼(주민번호, 질병정보 등)에 적용되며, 사용자별로 접근 수준 조절 가능하나 색인 불가, 성능 저하 단점이 있다. DB 전체 암호화는 테이블스페이스 단위로 수행되며 구현이 간단하고 높은 안전성을 제공하나 성능 저하, 사용자 구분 불가 등의 단점이 있다
# 2장 데이터베이스 암호화 구축
## 2.1 원본 데이터 삭제
암호화 수행 후 평문 데이터를 모든 저장소에서 삭제해야 하며, 인덱스 등 관련 정보도 함께 제거한다. 삭제 시기는 서비스를 일시정지하거나 유지한 채 수행할 수 있고, 전자는 빠르나 가용성이 낮고 후자는 시간이 오래 걸림
## 2.2 제약사항 유지
암호화 후에도 인덱스, PK, FK, 트리거 등 기존 제약 조건을 유지해야 하며, 인덱스가 필요한 경우 암호화 컬럼을 복호화 후 활용하거나 별도 컬럼을 운영하여 해결
## 2.3 DB 암호화 키 관리
암호 키는 데이터 복호화에 직접 연결되므로 안전한 관리가 핵심. 키 관리 방법에는 마스터 키(Master Key), HSM(Hardware Security Module) 사용이 있으며, 키 변경 주기와 접근 제어가 필요. 키 재발급, 유효기간 설정은 KMS를 통해 수행하고, 권장 유효기간은 1\~2년 이내
# 3장 데이터베이스 암호화 운영
## 3.1 암호 키 변경 이력 및 백업 관리
암호 키 유출, 분실 방지 위해 키 변경 이력, 백업 관리가 필요. Oracle Key Vault는 TDE 암호키 관리에 특화된 솔루션으로 모든 키, 인증서 등을 관리하며 백업, 발급 이력, 다양한 키스토어 파일 관리 지원
## 3.2 사용자 로그 관리
암호화된 데이터에 대한 사용자 행동을 기록하고 모니터링하여 보안 위협을 탐지. Oracle에서는 파라미터 파일 설정, 감사 규칙을 통해 로그인/행동/객체 감사를 수행. 감사 레코드는 SYS.AUD\$ 등 데이터 사전에 저장되며 다양한 뷰(AUDIT\_ACTION, DBA\_AUDIT\_TRAIL 등)를 통해 효율적으로 조회 가능. 외부 감사 솔루션으로 Audit Vault, Total Recall 등이 있음
# 4장 Oracle DBMS 암호화
## 4.1 TDE(Transparent Data Encryption)
Oracle, MySQL, MSSQL 등에서 제공하는 DB 수준 암호화 기술. 10gR2부터 컬럼, 11g부터 테이블스페이스 단위 지원. 응용 프로그램 수정 없이 커널 수준에서 암복호화 수행하며 AES, 3DES 등 다양한 알고리즘 및 블록 모드 지원. 마스터 키는 Oracle Wallet이나 HSM에 저장되어 외부 공격에도 안전. 마스터 키가 개별 테이블 키를 암호화하는 방식으로 구성됨
## 4.2 DBMS\_CRYPTO 패키지
Oracle의 시스템 패키지로 암복호화를 위해 다양한 알고리즘(DES, AES 등)과 블록 암호화 모드(ECB, CBC, OFB 등) 및 패딩, 해시, MAC 기능을 상수로 제공함
# 5장 MySQL DBMS 암호화
## 5.1 MySQL TDE
5.7부터 파일 단위, 8.0부터 테이블스페이스, 스키마, 로그 등 전체 암호화 지원. 키 관리는 키링(Keyring) 플러그인을 통해 이루어지며 Oracle Key Vault와 유사. 마스터 키로 테이블 키를 암호화하며 Oracle과 달리 컬럼 암호화 미지원, AES256만 지원, ECB 모드만 사용 가능
## 5.2 암복호화 메소드
MySQL은 AES\_ENCRYPT, AES\_DECRYPT 함수를 제공하며 SSL 설정 필요. 암호화는 INSERT 시 적용하며 OpenSSL은 다양한 모드(ECB, CBC 등), yaSSL은 제한된 모드만 지원
# 6장 블록 암호 모드
## 6.1 ECB(Electronic CodeBook)
각 블록을 독립적으로 암호화. 병렬 처리 가능하나 키값 유추 쉬워 보안성 낮음
## 6.2 CBC(Cipher Block Chaining)
이전 암호문 블록과 XOR 후 암호화. 보안성 높지만 병렬 처리 어려움
## 6.3 CFB(Cipher Feedback)
앞선 암호문 블록을 암호화하여 결과와 평문 XOR. 블록 단위 암호화 아님
## 6.4 OFB(Output Feedback)
CFB와 유사하나 다음 블록 암호화 시 이전 평문 사용 X. 동기화에 강함
## 6.5 CTR(Counter)
증가하는 카운터를 암호화하여 키 스트림 생성. 병렬 처리 가능, 스트림 암호로 활용