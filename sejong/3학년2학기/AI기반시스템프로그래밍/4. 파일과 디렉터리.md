# 3. 링크 및 파일 시스템 구조
## Hard Link vs Symbolic Link (Soft Link)

| **항목**        | **Hard Link**                 | **Symbolic Link**            |     |
| ------------- | ----------------------------- | ---------------------------- | --- |
| **i-node 공유** | O (같은 i-node 번호 공유)           | X (별도 i-node 가짐)             |     |
| **내용 저장**     | 동일한 데이터 영역                    | **링크 경로 문자열**                |     |
| **제약**        | 같은 파일 시스템 내에서만 가능, 디렉터리 생성 불가 | 다른 파일 시스템 가능, 디렉터리 가능        |     |
| **대상 삭제 시**   | 여전히 접근 가능 (링크 카운트가 0이 될 때까지)  | **깨짐** (Dangling symlink 가능) |     |
- `link(existingpath, newpath)`: 하드 링크 생성.
- `symlink(target, linkpath)`: 심볼릭 링크 생성 (대상 경로가 존재하지 않아도 생성 가능).
- `readlink(pathname, buf, bufsiz)`: 심볼릭 링크가 가리키는 **경로 문자열**(링크 자체의 내용)을 읽습니다.
## 파일 및 디렉터리 이름 관리
- `unlink(pathname)`: 디렉터리에서 **이름을 제거**하고, i-node의 **링크 카운트를 감소**시킵니다. 링크 카운트가 0이고 열린 프로세스가 없어야 파일이 실제로 제거됩니다. (이는 `rm` 명령어가 내부적으로 사용합니다) 
- `remove(pathname)`: 일반 파일이면 `unlink()`를, 디렉터리이면 `rmdir()`을 호출합니다.
- `rename(oldpath, newpath)`: 파일 또는 디렉터리의 이름을 변경합니다. `newpath`가 존재하면 **원자적 연산으로 덮어씁니다**. (이는 `mv` 명령어가 내부적으로 사용합니다) 
## 파일 시스템과 I-node
- **파일 시스템 구조**: 디스크는 파티션으로 나뉘고, 각 파티션은 부트 블록, 슈퍼 블록, 실린더 그룹 등으로 구성됩니다.
- **I-node**: 파일의 메타데이터(크기, 권한, 디스크 블록 주소 등)를 저장하는 구조체입니다. **파일 이름은 i-node에 저장되지 않습니다.**
- **디렉터리**: **파일 이름**과 해당 파일의 **i-node 번호**를 매핑하여 저장하는 특수한 파일입니다.
# 4. 시간 정보 및 디렉터리 I/O
## 파일 시간 (File Times)
`stat` 구조체에는 다음과 같은 시간 정보가 저장됩니다:
- **Access time (`atime`)**: 마지막으로 파일을 읽은 시간.
- **Modification time (`mtime`)**: 마지막으로 파일 **내용**을 수정한 시간.
- **Change time (`ctime`)**: i-node 정보(소유자, 권한 등)가 변경된 시간.
- **Birth time (`btime`)**: Linux `statx()` 시스템 콜에서 제공되는 **파일 생성 시간** (최신 정보).
- **시간 변경**: `futimens()` 또는 `utimensat()`로 `atime`과 `mtime`을 수정할 수 있으나, `ctime`은 **커널이 자동으로 관리**하며 사용자가 직접 설정할 수 없습니다.
## 디렉터리 I/O
디렉터리는 일반 파일과 달리 전용 함수를 통해 접근합니다.
- `opendir(pathname)`: 디렉터리를 열고 `DIR*` 구조체를 반환합니다.
- `readdir(DIR *dp)`: 다음 디렉터리 엔트리를 읽어 `struct dirent*`를 반환합니다.
- `closedir(DIR *dp)`: 디렉터리 스트림을 닫습니다.
- **디렉터리 순회**: `opendir()` -> `while(readdir())` -> `closedir()` 패턴을 사용하여 디렉터리 내용을 읽습니다.
## 작업 디렉터리 변경
- `chdir(pathname)`: 현재 작업 디렉터리(Current Working Directory, CWD)를 변경합니다.
- `getcwd(buf, size)`: 현재 작업 디렉터리의 **절대 경로**를 반환합니다.
    - `cd` 명령은 셸의 내장 명령어이며, 자식 프로세스가 `chdir()`을 호출해도 부모 셸의 CWD에는 영향을 미치지 않습니다.